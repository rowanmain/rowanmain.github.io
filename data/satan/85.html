<!DOCTYPE html>
<html>
<head>
   <title>Моя статья</title>
   <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<style>
body {
   background-color: #f0f0f0;
   font-family: Arial, sans-serif;
}

header {
   background-color: #333;
   color: white;
   padding: 10px;
   text-align: center;
}

h1 {
   margin: 0;
}

article {
   margin: 20px;
}

h2 {
   color: #333;
}

p {
   line-height: 1.6;
}
</style>
<body>
   <header>
       <h1>статья</h1>
   </header>
   <article>
       <p>
Инфраструктура

Предметная область

Рис. 34.9. Предметный и инфраструктурный код

Такой подход к организации исходного кода тоже дает положительные ре-

зультаты, но вы должны помнить о потенциальных компромиссах . Это то, 

что я называю «окружным антишаблоном портов и адаптеров» . В Париже 

(Франция) имеется окружная автодорога с названием Boulevard Périphérique 

(бульвар Периферик), позволяющая обогнуть Париж, не утруждая себя 

сложностями движения внутри города . Включение всего инфраструктурного 

кода в единое дерево подразумевает потенциальную возможность для кода из 

304   Глава 34. Недостающая глава

любой части приложения (например, веб-контроллера) напрямую вызывать 

код из другой части приложения (например, функции для работы с базой дан-

ных), без пересечения предметной области . Это особенно верно, если забыть 

применить в том коде соответствующие модификаторы доступа .

Заключение: недостающий совет

Основная цель этой главы — подчеркнуть, что любые, самые лучшие дизай-

нерские намерения можно уничтожить в мгновение ока, если не учитывать 

тонкости стратегии реализации . Подумайте, как ваш дизайн должен ото-

бражаться в структуру кода, как организовать этот код и какие режимы 

разделения применять во время выполнения и компиляции . Старайтесь 

оставлять открытыми любые возможности, но будьте прагматичными и учи-

тывайте численность вашей команды, навыки ее членов, сложность решения 

и ограничения по времени и бюджету . Также подумайте, как использовать 

компилятор для принудительного соблюдения выбранного архитектурного 

стиля, и следите за связями в других областях, таких как модели данных . 

Дьявол кроется в деталях реализации .

VII 

Приложение

Архитектурная археология

Профсоюзная система учета   307

Чтобы определить принципы хорошей архитектуры, совершим путешествие по 

последним 45 годам и познакомимся с некоторыми проектами, над которыми 

я работал начиная с 1970 года. Некоторые из этих проектов представляют 

определенный интерес с архитектурной точки зрения. Другие интересны из-

влеченными уроками, повлиявшими на последующие проекты.

Это приложение несколько автобиографично. Я старался придерживаться темы 

обсуждения архитектуры, но, как в любой автобиографической истории, иногда 

в нее вторгаются другие факторы. ;-)

Профсоюзная система учета

В конце 1960-х годов компания ASC Tabulating подписала контракт с местным 

профсоюзом водителей грузовиков на разработку системы учета. Компания 

ASC решила реализовать эту систему на машине GE Datanet 30, изображенной 

на рис. П.1.

Рис. П.1. GE Datanet 30 

(фотографию предоставил Эд Телен (Ed Thelen), ed-thelen.org)

308   Приложение. Архитектурная археология

Как можно видеть на фотографии, это была огромная1 машина. Она занимала 

целую комнату и требовала поддержания определенного микроклимата.

Эта ЭВМ была построена еще до появления интегральных микросхем. Она 

была собрана на дискретных транзисторах, и в ней имелось даже несколько 

радиоламп (хотя они использовались только в усилителях для управления 

ленточными накопителями).

По сегодняшним меркам машина была огромная, медлительная и примитивная. 

В ней имелось 16 К × 18 бит оперативной памяти с временем цикла порядка 

7 микросекунд2. Она занимала большую комнату с климатической установкой. 

Имела приводы для магнитной ленты с семью дорожками и жесткий диск ем-

костью около 20 Мбайт.

Этот диск был настоящим монстром. Вы можете увидеть его на рис. П.2, но эта 

фотография не позволяет оценить размеры чудовища. Он был выше моего роста. 

Пластины были 36 дюймов (примерно 91 сантиметр) в диаметре и 3/8 дюйма 

(9,5 миллиметра) в толщину. Одна из пластин изображена на рис. П.3.

Теперь подсчитайте пластины на первой фотографии. Их было более десятка. 

Для каждой имелась своя лапа с головкой, приводившаяся в движение пневма-

тическим приводом. В процессе работы можно было видеть, как головки пере-

мещаются поперек пластин. Время позиционирования головки колебалось от 

половины секунды до секунды.

Когда этот зверь включался, он рычал, как самолет. Пол ходил ходуном, пока 

тот набирал скорость3.

ЭВМ Datanet 30 была знаменита своей возможностью асинхронно управлять 

большим количеством терминалов с относительно высокой скоростью. Именно 

это требовалось компании ASC.

Компания ASC находилась в Лейк Блафф, штат Иллинойс, в 30 милях к северу 

от Чикаго. Офис профсоюза размещался в центре Чикаго. Проф союз нанял 

примерно десять человек для ввода данных в систему через терминалы CRT4 

(рис. П.4). Они также могли печатать отчеты на телетайпах ASR35 (рис. П.5).

1 В ASC нам рассказали историю, как транспортировалась эта ЭВМ. Ее везли на боль-

шом грузовике с полуприцепом вместе с мебелью. По пути грузовик, двигаясь на вы-

сокой скорости, зацепил крышей мост. ЭВМ не пострадала, но она сместилась вперед 

и вдребезги раздавила мебель.

2 Сегодня мы могли бы сказать, что она работала с тактовой частотой 142 КГц.

3 Представьте массу диска, какой кинетической энергией он обладал! Однажды мы заме-

тили металлическую стружку, вылетевшую из корпуса диска. Мы вызвали ремонтника, 

и он тут же попросил выключить диск. Закончив ремонт, он сказал, что износился один 

из подшипников. Затем он рассказал нам, как однажды вовремя не отремонтированный 

диск сорвался с креплений, пробил бетонную стену и застрял в автомобиле на стоянке 

рядом.

4 С электронно-лучевыми трубками зеленого свечения, способные отображать только 

символы ASCII.

Профсоюзная система учета   309

Рис. П.2. Жесткий диск с пластинами 

(фотографию предоставил Эд Телен (Ed Thelen), ed-thelen.org)

Рис. П.3. Одна из пластин диска: 3/8 дюйма толщиной, 36 дюймов в диаметре 

(фотографию предоставил Эд Телен (Ed Thelen), ed-thelen.org)

310   Приложение. Архитектурная археология

Рис. П.4. Терминал CRT

(фотографию предоставил Эд Телен (Ed Thelen), ed-thelen.org)

Терминалы CRT поддерживали скорость обмена 30 символов в секунду. Это 

была хорошая скорость для конца 1960-х, потому что модемы в те дни были 

очень простенькими.

</p>
   </article>
</body>
</html>
