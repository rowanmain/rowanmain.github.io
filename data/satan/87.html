<!DOCTYPE html>
<html>
<head>
   <title>Моя статья</title>
   <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<style>
body {
   background-color: #f0f0f0;
   font-family: Arial, sans-serif;
}

header {
   background-color: #333;
   color: white;
   padding: 10px;
   text-align: center;
}

h1 {
   margin: 0;
}

article {
   margin: 20px;
}

h2 {
   color: #333;
}

p {
   line-height: 1.6;
}
</style>
<body>
   <header>
       <h1>статья</h1>
   </header>
   <article>
       <p>
устройства, создающие сопротивление электрическому току.

Величина сопротивления резистора зависела от множества факторов, включая 

состав и геометрию. Чем шире был резистор, тем меньшее сопротивление он 

оказывал.

Наша система позиционировала керамическую подложку в жгуте проводов, 

соединяющих датчики с резисторами. Система должна была измерять сопро-

тивление и затем с помощью лазера отсекать части резистора, делая его тоньше 

и тоньше, пока не будет достигнута желаемая величина сопротивления с точ-

ностью до десяти процентов.

Мы продавали эти системы производителям, а также использовали некоторые 

свои системы для производства небольших партий по заказам менее крупных 

производителей.

Система работала на компьютере M365. Это было время, когда многие компании 

строили свои компьютеры: корпорация Teradyne строила M365 и передавала 

их своим подразделениям. M365 был усовершенствованной версией PDP-8 — 

популяр ного в те дни мини-компьютера.

M365 управлял координатным столом, который перемещал керамические под-

ложки между датчиками. Также он управлял системой измерения и лазером. 

Позиционирование лазера осуществлялось посредством вращающихся X-Y 

зеркал. Компьютер также управлял мощностью лазера.

Среда разработки для M365 была довольно примитивной. Этот компьютер не 

имел диска. Данные сохранялись на картриджах с магнитной лентой, которые 

выглядели как старые 8-дорожечные аудиокассеты. Лента и приводы произво-

дились компанией Tri-Data.

Так же как 8-дорожечные аудиокассеты того времени, лента была склеена в петлю. 

Привод мог прокручивать ее только в одном направлении — в них не было функ-

ции перемотки! Если требовалось установить ленту в начальную позицию, нужно 

было прокручивать ее вперед до достижения «точки загрузки».

Лента прокручивалась со скоростью примерно 1 фут в секунду (примерно 

30 сантиметров в секунду). То есть петля из ленты длиной 25 футов (чуть боль-

Laser Trim   315

ше 7,5 мет ра) перематывалась до точки загрузки самое большее за 25 секунд. По 

этой причине Tri-Data выпускала картриджи с лентой разной длины, от 10 до 

100 футов (примерно от 3 до 30 метров).

На передней панели M365 имелась кнопка, по нажатии которой производилась 

загрузка начальной программы в память и ее запуск. Эта программа могла про-

читать первый блок с ленты и запустить его. Обычно в этом блоке хранился 

загрузчик, загружавший операционную систему, хранящуюся в остальных 

блоках на ленте.

Операционная система запрашивала у пользователя имя программы для запу-

ска. Эти программы хранились на ленте, сразу вслед за операционной системой. 

Пользователь мог ввести имя программы — например, ED-402 Editor, — а опе-

рационная система отыскивала ее на ленте, загружала и запускала.

Консолью служил ASCII CRT терминал с зеленым свечением, шириной 72 сим-

вола1 и высотой 24 строки. Он мог отображать только символы верхнего регистра.

Чтобы отредактировать программу, нужно было загрузить редактор ED-402 

Editor и затем вставить ленту с исходным кодом. Редактор позволял прочитать 

с ленты в память один блок с исходным кодом и вывести его на экран. В одном 

блоке можно было сохранить до 50 строк кода. Для внесения изменений нужно 

было переместить курсор в требуемую строку и ввести текст, примерно так, 

как это делается в редакторе vi. По завершении требовалось записать блок на 

другую ленту и прочитать следующий блок с исходной ленты. Вы должны были 

продолжать эти манипуляции, пока не закончите.

Не было никакой возможности прокрутить блоки в обратном направлении. 

Правка программы производилась линейно, от начала до конца. Чтобы вернуть-

ся в начало, нужно было закончить копирование исходного кода на выходную 

ленту и затем начать новый сеанс редактирования уже с этой лентой в качестве 

исходной. Неудивительно, что при таких ограничениях мы сначала писали 

свои программы на бумаге, вносили все правки вручную красным карандашом 

и только потом правили программу блок за блоком, сверяясь с пометками в ли-

стинге на бумаге.

Закончив правку программы, мы возвращались в операционную систему и вы-

зывали ассемблер. Ассемблер читал код с исходной ленты и записывал двоич-

ный код на другую ленту, при этом выводил листинг на наш последовательный 

принтер.

Ленты не были на 100% надежными, поэтому мы выполняли запись сразу на 

две ленты. Это увеличивало вероятность, что хотя бы одна из них не будет со-

держать ошибок.

1 Магическое число 72 пришло из эпохи перфокарт Hollerith, содержавших по 80 сим-

волов каждая. Последние 8 символов «резервировались» под порядковый номер на 

случай, если вы уроните и рассыплете колоду.

316   Приложение. Архитектурная археология

Наша программа состояла примерно из 20 000 строк кода, а ее компиляция зани-

мала примерно 30 минут. Шансы получить в это время ошибку чтения с ленты 

были 1 : 10. Если ассемблер сталкивался с такой ошибкой, он издавал сигнал 

на консоли и затем начинал выводить поток ошибок на принтер. Этот сигнал 

можно было услышать во всей лаборатории. Также можно было услышать 

проклятия несчастного программиста, только что узнавшего, что ему придется 

вновь запустить 30-минутный процесс компиляции.

Программа имела типичную для тех дней архитектуру. У нас имелась главная 

операционная программа (Master Operating Program), которую мы называли 

«the MOP». Она осуществляла управление базовыми функциями ввода/вы-

вода и предоставляла рудиментарную «командную оболочку» для консоли. 

Многие подразделения Teradyne использовали общий исходный код MOP, 

адаптируя его под собственные нужды. Как следствие, мы пересылали друг 

другу изменения в исходном коде в форме бумажных листингов с поправка-

ми, которые затем (очень тщательно) вносили вручную.

Измеряющим оборудованием, координатными столами и лазером управляла 

специальная утилита. Граница между этим уровнем и MOP была запутанной. 

Уровень утилиты часто вызывал уровень MOP, а специально модифицирован-

ная версия MOP часто вызывала утилиту. В действительности мы не разделяли 

их на два уровня. Для нас это был лишь некоторый код, добавляемый нами 

в MOP и создающий тесные связи.

Затем появился уровень изоляции. Этот уровень поддерживал интерфейс 

виртуальной машины для прикладных программ, которые писались на совер-

шенно другом, предметно-ориентированном языке (Domain-Specific Language; 

DSL). Язык включал операции перемещения лазера и координатного стола, 

выполнения реза и измерений и т. д. Наши клиенты писали на этом языке свои 

программы управления лазером, а изолирующий уровень выполнял их.

Этот подход не предусматривал создания машинно-независимого языка про-

</p>
   </article>
</body>
</html>
