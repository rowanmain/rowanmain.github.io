<!DOCTYPE html>
<html>
<head>
   <title>Моя статья</title>
   <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<style>
body {
   background-color: #f0f0f0;
   font-family: Arial, sans-serif;
}

header {
   background-color: #333;
   color: white;
   padding: 10px;
   text-align: center;
}

h1 {
   margin: 0;
}

article {
   margin: 20px;
}

h2 {
   color: #333;
}

p {
   line-height: 1.6;
}
</style>
<body>
   <header>
       <h1>статья</h1>
   </header>
   <article>
       <p>
ния данных . Технология производства дисковых накопителей прошла дол-

гий путь от огромных пакетов массивных пластин по 48 дюймов в диаметре, 

весивших тысячи килограммов и способных хранить 20 мегабайт, до тонких 

дисков по 3 дюйма в диаметре, весящих несколько граммов и способных 

хранить терабайт данных и даже больше . Это была сумасшедшая гонка. И на 

протяжении всей этой гонки программисты страдали от одного фатального 

свойства дисков: они работают слишком медленно .

Данные хранятся на диске на круговых дорожках . Дорожки делятся на 

секторы, хранящие определенное круглое число байтов, обычно 4 Кбайт . 

На каждой пластине может иметься несколько сотен дорожек, а в одном 

дисковом накопителе — десяток или около того пластин . Чтобы прочитать 

конкретный байт, устройство должно поместить головку на конкретную 

дорожку, дождаться, пока диск повернется так, что требуемый сектор ока-

жется под головкой, прочитать все 4 Кбайт из сектора в ОЗУ, и затем вам 

останется только прочитать требуемый байт из ОЗУ . Но все это требует 

времени — миллисекунд времени .

Может показаться, что миллисекунды — это немного, но миллисекунда 

в миллион раз продолжительнее одного такта большинства процессоров . 

Если бы данные хранились не на диске, к ним можно было бы получить до-

ступ не за миллисекунды, а за наносекунды .

Чтобы уменьшить задержку, вносимую дисками, нужны индексы, кэши и оп-

тимизированные схемы запросов; а еще нужны какие-то регулярные средства 

представления данных, чтобы все эти индексы, кэши и схемы запросов знали, 

с чем они работают . Проще говоря, нужен доступ к данным и система управле-

ния . За годы развития эти системы разделились на два разных типа: файловые 

системы и системы управления реляционными базами данных (СУРБД) .

Файловые системы опираются на понятие документа . Они поддерживают 

естественный и удобный способ хранения целых документов . Они хорошо 

Сохранятся ли диски?      269

работают, когда требуется сохранить или извлечь набор документов по 

имени, но не предлагают сколько-нибудь существенной помощи в поиске 

по содержимому документов . Вы легко найдете файл с именем login.c, но 

поиск всех файлов .c, содержащих переменную с именем x, будет долгим 

и трудным .

Системы баз данных ориентированы на содержимое . Они поддерживают 

естественный и удобный способ поиска записей по содержимому . Они очень 

хорошо связывают вместе несколько записей, имеющих общее содержимое . 

К сожалению, их преимущества теряются при хранении и извлечении не-

прозрачных документов .

Обе системы организуют хранение данных на диске так, чтобы обеспечить 

максимальную эффективность их сохранения и чтения, с учетом конкрет-

ных особенностей . Каждая имеет свою схему индексирования и организации 

данных . Кроме того, обе переносят соответствующие данные в ОЗУ, где ими 

можно быстро манипулировать .

Сохранятся ли диски?

Прежде занимающие доминирующие позиции, ныне диски превратились 

в вымирающий вид . В скором времени их ожидает судьба накопителей на 

магнитной ленте, гибких дисков и приводов компакт-дисков . Им на смену 

придет ОЗУ .

Спросите себя: когда диски исчезнут и все данные будут храниться в ОЗУ, 

как вы будете организовывать их? Вы предпочтете организовать их в табли-

цы и обращаться к ним, используя запросы на языке SQL? Или организовать 

их в файлы и обращаться к ним через систему каталогов?

Конечно нет . Вы организуете их в связные  списки, деревья, хеш-таблицы, 

стеки, очереди или любые другие структуры данных и будете обращаться 

к ним, используя указатели или ссылки, потому что программисты так при-

выкли .

На самом деле, поразмыслив об этой проблеме, вы поймете, что все это 

вы уже делаете . Несмотря на то что данные хранятся в базе данных или 

в файловой системе, вы читаете их в ОЗУ и затем реорганизуете в удобные 

списки, множества, стеки, очереди, деревья или любые другие структуры по 

своему усмотрению . Очень маловероятно, что вы оставите данные в форме 

файлов или таблиц .

270   Глава 30. База данных — это деталь

Детали

Такое положение дел объясняет, почему я говорю, что база данных — это 

деталь . Это лишь механизм перемещения данных взад-вперед между по-

верхностью диска и ОЗУ . База данных в действительности — не более чем 

большой мешок с битами, в котором мы храним свои данные . Но мы редко 

используем данные именно в такой форме .

То есть с архитектурной точки зрения мы не должны беспокоиться о том, 

какую форму принимают данные, пока хранятся на поверхности вращающе-

гося магнитного диска . В действительности нас вообще не должно волновать 

наличие или отсутствие диска .

А производительность?

Является ли производительность архитектурной проблемой? Конечно! Но 

в отношении хранения данных эту проблему можно полностью инкапсули-

ровать и отделить от бизнес-правил . Да, нам нужно, чтобы данные быстро 

перемещались из хранилища и в хранилище, но это низкоуровневая про-

блема . Ее можно решить с помощью низкоуровневых механизмов доступа 

к данным . И она не имеет ничего общего с архитектурой системы .

История

В конце 1980-х годов я возглавлял команду разработчиков программного 

обеспечения в начинающей компании, которая пыталась создать и продать 

систему управления сетью, оценивавшую целостность телекоммуникацион-

ных линий T1 . Система извлекала данные из устройств в конечных точках 

этих линий, а затем запускала ряд алгоритмов для обнаружения проблем .

Мы использовали платформы UNIX и хранили наши данные в простых 

файлах . Нам не нужна была реляционная база данных, потому что наши 

данные были слабо связаны между собой . Намного удобнее было хранить 

их в простых файлах, в виде деревьев и связных списков . Короче говоря, мы 

хранили данные в форме, упрощающей их загрузку в ОЗУ .

Мы наняли специалиста по маркетингу — хорошего знающего парня . Но 

он тут же заявил, что в нашей системе должна иметься реляционная база 

История      271

данных . Этого не требовалось для нормальной работы, и это не было техни-

ческой проблемой — это была проблема маркетинга .

Для меня это было бессмысленно . Почему я должен превращать связные 

списки и деревья в кучу записей и таблиц, доступных через SQL? Почему 

я должен вводить накладные расходы и тратить деньги на приобретение 

</p>
   </article>
</body>
</html>
