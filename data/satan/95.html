<!DOCTYPE html>
<html>
<head>
   <title>Моя статья</title>
   <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<style>
body {
   background-color: #f0f0f0;
   font-family: Arial, sans-serif;
}

header {
   background-color: #333;
   color: white;
   padding: 10px;
   text-align: center;
}

h1 {
   margin: 0;
}

article {
   margin: 20px;
}

h2 {
   color: #333;
}

p {
   line-height: 1.6;
}
</style>
<body>
   <header>
       <h1>статья</h1>
   </header>
   <article>
       <p>
электронный секретарь мог бы записать голосовое сообщение для меня.

Затем электронный секретарь предпринимал периодические попытки найти 

меня и доставить сообщение, оставленное для меня кем-то другим.

Это была первая система голосовой почты, и мы1 получили патент на нее.

Мы собрали все необходимое оборудование для этой системы — компьютерную 

плату, плату памяти, платы для связи и записи голоса и все остальное. Роль 

компьютерной платы играла плата компьютера Deep Thought (Думатель) на 

процессоре Intel 80286, о котором я уже рассказывал.

Для каждой телефонной линии была создана отдельная голосовая плата. Эти 

платы содержали телефонный интерфейс, аппаратуру для кодирования/деко-

дирования голоса, некоторый объем памяти и микрокомпьютер Intel 80186.

Программное обеспечение для главной компьютерной платы было написано 

на C. В качестве операционной системы использовалась MP/M-86, одна из 

первых многозадачных дисковых систем, управляемых из командной строки. 

MP/M — это UNIX для бедных.

Программное обеспечение для голосовых плат было написано на ассемблере 

и действовало без операционной системы. Взаимодействие компьютера Deep 

Thought с голосовыми платами осуществлялось через общую память.

Архитектуру этой системы в наши дни назвали бы сервис-ориентированной. 

Каждая телефонная линия обслуживалась отдельным процессом, действующим 

под управлением MP/M.

1 Держателем патента стала наша компания. В нашем контракте с работодателем 

однозначно говорилось, что права на любые наши изобретения будут принадлежать 

компании. Мой начальник сказал мне: «Вы продали нам это за один доллар, но мы не 

выплатили вам этот доллар».

336   Приложение. Архитектурная археология

Когда поступал входящий звонок, запускался начальный процесс для обработ-

ки и звонок передавался ему. По мере перехода обслуживания звонка из одной 

стадии в другую запускался соответствующий процесс-обработчик и управление 

передавалось ему.

Сообщения передавались между этими службами через дисковые файлы. Теку-

щая выполняющаяся служба могла определить, какую службу запустить далее; 

записать необходимую информацию в дисковый файл; выполнить команду для 

запуска этой службы и затем завершиться.

Я впервые занимался созданием такой системы. В действительности это был 

первый раз, когда я выступал в роли главного архитектора продукта. Все, что 

имело отношение к программному обеспечению, было моим — и все работало 

как надо.

Я не могу сказать, что архитектура этой системы была «чистой» в том смысле, 

в каком предполагает эта книга; она не была архитектурой «сменных модулей» 

(плагинов). Однако в ней имелись явные признаки истинных границ. Службы 

развертывались независимо, и каждая отвечала за определенную предметную 

область. В системе имелись процессы высокого и низкого уровня, и многие за-

висимости простирались в правильном направлении.

Конец электронного секретаря

К сожалению, попытки продать этот продукт оказались неудачными. Компания 

Teradyne специализировалась на производстве контрольно-измерительного 

оборудования. Мы не представляли, как проникнуть на рынок конторского 

оборудования.

После неоднократных попыток, продолжавшихся в течение более двух лет, 

наш генеральный директор отказался от них и — к сожалению — отозвал за-

явку на патент. Патент был получен другой компанией, подавшей заявку через 

три месяца после нашей; так мы сдали рынок голосовой почты и электронной 

переадресации звонков.

Ой-ёй!

Зато теперь вы не сможете поставить мне в вину появление всех этих раздра-

жающих машин, отравляющих наше существование.

Система командирования ремонтников

Электронный секретарь потерпел неудачу как продукт, но у нас оставалось 

программное обеспечение и оборудование, которые мы могли бы использовать 

Система командирования ремонтников   337

для расширения линейки имеющихся продуктов. Кроме того, успех VRS на 

рынке убедил нас, что мы должны предложить систему с голосовым ответом 

для организации взаимодействий с ремонтниками, которые не зависят от наших 

систем тестирования.

Так родилась CDS — система командирования ремонтников (Craft Dispatch 

System). По сути, система CDS была электронным секретарем (ER), но ориенти-

рованным на решение узкого круга задач в области управления ремонтниками.

Когда в телефонной линии обнаруживалась проблема, в сервисный центр 

посылалась заявка. Заявки хранились в автоматизированной системе. Когда 

ремонтник, работающий в поле, завершал обслуживание заявки, он звонил 

в сервисный центр, чтобы получить следующее назначение. Оператор сервис-

ного центра извлекал следующую заявку и читал ее вслух ремонтнику.

Мы приступили к автоматизации этого процесса. Наша цель состояла в том, 

чтобы создать систему CDS, которой мог бы позвонить ремонтник, работающий 

в поле, и запросить следующее назначение. Система должна была обратиться 

к системе заявок и зачитать извлеченную из нее заявку. Система CDS могла бы 

следить за назначением заявок ремонтникам и информировать систему заявок 

о приеме заявки к исполнению.

Эта система имела немало интересных особенностей, связанных с взаимодей-

ствием с системой заявок, системой управления предприятием и системами 

автоматизированного тестирования.

Опыт разработки сервис-ориентированной архитектуры ER пробудил во мне 

желание еще раз опробовать эту идею. Машина состояний для обработки за-

явок оказалась намного сложнее, чем машина состояний для обработки звонков 

в электронном секретаре. Я приступил к созданию архитектуры, которая в наши 

дни называется архитектурой микрослужб.

Каждый переход между этапами обслуживания любого звонка, каким бы не-

значительным он ни был, вынуждал систему запускать новую службу. В дей-

ствительности все переходы описывались в текстовом файле, который читала 

система. Каждое событие, поступающее в систему по телефонной линии, вызы-

вало соответствующий переход между службами. Существующий процесс мог 

запускать для обработки события новый процесс, в соответствии с текущим со-

стоянием; затем существующий процесс мог завершиться или ждать в очереди.

Такое решение позволяло нам изменять порядок выполнения операций без из-

менения кода (принцип открытости/закрытости). Мы легко могли добавлять 

новые службы независимо от других и внедрять их в поток, просто изменяя 

текстовый файл с описаниями переходов. Мы могли делать это даже в процес-

се работы системы. Иными словами, у нас появился механизм горячей замены 

и эффективный язык выполнения бизнес-процессов (Business Process Execution 

</p>
   </article>
</body>
</html>
