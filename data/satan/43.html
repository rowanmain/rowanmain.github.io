<!DOCTYPE html>
<html>
<head>
   <title>Моя статья</title>
   <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<style>
body {
   background-color: #f0f0f0;
   font-family: Arial, sans-serif;
}

header {
   background-color: #333;
   color: white;
   padding: 10px;
   text-align: center;
}

h1 {
   margin: 0;
}

article {
   margin: 20px;
}

h2 {
   color: #333;
}

p {
   line-height: 1.6;
}
</style>
<body>
   <header>
       <h1>статья</h1>
   </header>
   <article>
       <p>
цилиндров/головок/секторов . Нам также приходилось изменять все жестко 

зашитые номера в коде, которые были повсюду! Все бизнес-правила скрупу-

лезно учитывали схему цилиндр/головка/сектор .

Однажды в наши ряды влился более опытный программист . Увидев наше 

«творчество», он побледнел и уставился на нас как на инопланетян . Затем 

осторожно посоветовал нам изменить схему адресации и использовать от-

носительные адреса .

Наш более умудренный опытом коллега предложил рассматривать диск 

как большой линейный массив секторов с последовательными номерами . 

Такая интерпретация позволяла написать крошечную подпрограмму преоб-

разования, которая, зная физическую структуру диска, могла бы «на лету» 

транслировать относительные адреса в номера физических цилиндров/

головок/секторов .

К счастью для нас, мы приняли его совет . Мы изменили высокоуровневую 

политику системы, добавив независимость от физической структуры диска . 

Это позволило нам отделить решение об организации записей на диске от 

прикладной задачи .

Заключение

Две истории, рассказанные в этой главе, наглядно демонстрируют один 

маленький принцип, который широко используют архитекторы . Хорошие 

архитекторы скрупулезно отделяют детали от политики и затем не менее 

скрупулезно отделяют политику от деталей, чтобы политика никак не за-

висела от деталей . Хорошие архитекторы проектируют политику так, чтобы 

решения о деталях можно было отложить и отодвинуть на как можно более 

поздний срок .

16 Независимость

156   Глава 16. Независимость

Как отмечалось выше, хорошая архитектура должна обеспечивать:

 

� Разнообразие вариантов использования и эффективную работу системы .

 

� Простоту сопровождения системы .

 

� Простоту разработки системы .

 

� Простоту развертывания системы .

Варианты использования

Первый пункт в списке — разнообразие вариантов использования — озна-

чает, что архитектура системы должна поддерживать назначение системы . 

Если система — это онлайн-магазин, архитектура должна поддерживать 

разные варианты использования онлайн-магазина . Фактически в этом 

заключается главная задача архитектора и главная цель архитектуры . Ар-

хитектура должна поддерживать разнообразие вариантов использования .

Однако, как обсуждалось выше, архитектура не оказывает большого вли-

яния на поведение системы . Существует очень мало вариантов поведения, 

которые архитектура может оставить открытыми . Но влияние — это еще не 

все . Самое важное, что хорошая архитектура может сделать для поддержки 

поведения, — раскрывать и прояснять это поведение, чтобы назначение 

системы было видимо на архитектурном уровне .

Приложение онлайн-магазина с хорошей архитектурой будет выглядеть 

как приложение онлайн-магазина . Варианты использования такой системы 

будут ясно видны в ее структуре . Разработчикам не придется искать черты 

поведения, потому что они будут представлены полноценными элемента-

ми, видимыми на верхнем уровне системы . Такими элементами могут быть 

классы, функции или модули, занимающие видные позиции в архитектуре 

и имеющие имена, ясно описывающие их назначение .

В главе 21 «Кричащая архитектура» мы подробнее рассмотрим этот пункт .

Эффективность работы

Более существенную и менее косметическую роль архитектура играет в эф-

фективной работе системы . Если система должна обслуживать 100 000 кли-

ентов в секунду, архитектура должна поддерживать такую пропускную 

способность и время отклика для каждого возможного варианта . Если 

система должна запрашивать большие массивы данных за миллисекунды, 

Развертывание      157

архитектура должна быть структурирована так, чтобы обеспечивать воз-

можность подобных операций .

Для одних систем это означает создание массивов маленьких служб, выпол-

няющихся параллельно на множестве разных серверов . Для других — соз-

дание множества легковесных потоков выполнения, действующих в общем 

адресном пространстве, внутри одного процесса, выполняющегося на од-

ном процессоре . Для третьих достаточно запустить несколько процессов, 

действующих в изолированных адресных пространствах . А для некоторых 

вполне подойдут простые монолитные программы .

Как ни странно, это решение относится к числу тех, которые хороший архи-

тектор стремится оставить открытыми . Систему с монолитной организацией 

и зависящую от этой монолитной структуры трудно будет реорганизовать 

для поддержки выполнения в нескольких процессах, нескольких потоках 

или нескольких микрослужбах, если это потребуется . Напротив, архитек-

туру, предусматривающую надлежащую изоляцию компонентов и не пред-

полагающую конкретных средств взаимодействий между компонентами, 

будет намного проще провести через спектр нескольких потоков, процессов 

и служб по мере изменения потребностей .

Разработка

Архитектура играет важную роль в поддержке разработки . В данном случае 

начинает действовать закон Конвея:

Любая организация, разрабатывающая систему, невольно будет формировать 

дизайн, структура которого повторяет структуру взаимодействий внутри 

этой организации.

В организации с множеством команд, решающей множество задач, должна 

получиться архитектура, которая обеспечивает независимую работу этих 

команд, чтобы команды не мешали друг другу во время разработки . Это до-

стигается делением системы на изолированные компоненты, которые можно 

разрабатывать независимо . Затем эти компоненты распределяются между 

командами, которые могут работать независимо друг от друга .

Развертывание

Огромную роль архитектура играет также в простоте развертывания систе-

мы . Главная цель — «немедленное развертывание» . Хорошая архитектура 

158   Глава 16. Независимость

не полагается на десятки маленьких сценариев и файлов с определениями 

настроек . Она не требует вручную создавать каталоги или файлы и распола-

</p>
   </article>
</body>
</html>
