<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>book</title></head><body>в Q . Вообразите, что какой-то гений от маркетинга убеждает высшее ру-

ководство в необходимости переделать весь пользовательский интерфейс, 

чтобы он напоминал веб-интерфейс . Что бы вы сделали? Точнее, что вы 

должны были бы сделать до этого момента, чтобы защитить приложение от 

этого гения маркетинга?

Вы должны были бы отделить бизнес-правила от пользовательского интер-

фейса . Я не знаю, как поступили архитекторы в Q . Я хотел бы когда-нибудь 

услышать их рассказ . Если бы в то время я работал там, я бы точно изоли-

ровал бизнес-правила от пользовательского интерфейса, потому что никто 

не знает, что взбредет в голову гениям маркетинга в следующий раз .

Теперь рассмотрим пример с компанией A, выпускающей замечательные 

смартфоны . Недавно она выпустила обновленную версию своей «операци-

онной системы» (это так необычно — говорить об операционной системе 

внутри телефона) . Кроме всего прочего модернизация кардинально измени-

ла внешний вид всех приложений . Зачем? Я полагаю, что вновь не обошлось 

без какого-то гения маркетинга .

Я не эксперт по программному обеспечению в этих устройствах, поэтому не 

знаю, вызвали ли эти изменения какие-либо трудности для программистов 

приложений, выполняющихся на смартфонах компании A . Я надеюсь, что 

архитекторы в A и архитекторы приложений изолировали бизнес-правила 

276   Глава 31. Веб — это деталь

и пользовательский интерфейс друг от друга, потому что всегда найдутся 

гении маркетинга, которые только и ждут, чтобы наброситься на что-то, 

созданное вами.

Вывод

Вывод из всего вышесказанного прост: пользовательский интерфейс — это 

деталь. Веб — это пользовательский интерфейс. То есть Веб — это деталь. 

И как архитектор вы должны размещать детали, как эта, за границами, от-

деляющими их от основной бизнес-логики.

Подумайте об этом с такой позиции: Веб — это устройство ввода/вывода. 

Еще в 1960-х годах мы поняли ценность методики создания приложений, 

не зависящих от устройств ввода/вывода. Побудительные мотивы такой 

независимости не изменились. Веб не является исключением из этого 

правила.

Или я не прав? Можно утверждать, что графический интерфейс, как и Веб, 

настолько уникален и богат, что абсурдно продолжать создавать архи-

тектуры, независимые от устройства. Когда вы думаете о тонкостях про-

верки входных данных на JavaScript, особенностях технологии «перета-

щил и бросил» в AJAX или о том, какие еще виджеты/гаджеты вставить 

в веб-страницу, легко можно скатиться до утверждения, что независимость 

устройства непрактична.

Все это верно до определенной степени. Взаимодействия приложения 

с пользовательским интерфейсом обширны, многообразны и порой очень 

специфичны для данного интерфейса. Веб-приложение и веб-браузер 

взаимодействуют совершенно иначе, чем настольное приложение и гра-

фический интерфейс. Попытка абстрагироваться от этих взаимодействий, 

подобно тому, как в UNIX абстрагируются устройства, выглядит неверо-

ятной.

Но границу между пользовательским интерфейсом и приложением можно 

абстрагировать. Бизнес-логику можно рассматривать как набор вариантов 

использования, каждый из которых выполняет некоторую функцию от 

имени пользователя. Каждый вариант использования можно описать как 

комплекс входных данных, выполняемую обработку и комплекс выходных 

данных.

В какой-то момент в череде взаимодействий пользовательского интерфейса 

и приложения подготовка входных данных будет закончена и появится воз-

Заключение      277

можность выполнить вариант использования . По завершении полученные 

данные можно вернуть обратно, включив их во взаимодействия между 

пользовательским интерфейсом и приложением .

Входные и выходные данные можно поместить в структуры и использовать 

как входные и выходные значения для процесса, выполняющего вариант 

использования . При таком подходе можно считать, что каждый вариант ис-

пользования работает с пользовательским интерфейсом как с устройством 

ввода/вывода независимо от этого устройства .

Заключение

Достичь такой абстракции очень непросто, и, скорее всего, потребуется не-

сколько итераций, чтобы достичь желаемого результата . Но это возможно . 

А поскольку мир полон гениев от маркетинга, это не самое сложное, потому 

что часто бывает необходимо .

32

Фреймворки — 

это деталь

Неравный брак      279

Фреймворки обрели большую популярность . Вообще говоря, это хорошая 

штука . Существует много бесплатных, мощных и полезных фреймворков .

Но фреймворки не определяют архитектуру, хотя некоторые пытаются .

Авторы фреймворков

Большинство авторов фреймворков предлагают результаты своего труда 

бесплатно, потому что хотят быть полезными для сообщества . Они хотят 

внести свой вклад . Это похвально . Однако, независимо от благородства 

мотивов, авторы не думают о ваших интересах . И не могут думать, потому 

что они не знают ни вас, ни ваших проблем .

Но они знают свои проблемы и проблемы своих коллег и друзей . И они 

пишут свои фреймворки для решения этих проблем, а не ваших .

Конечно, ваши проблемы, скорее всего, частично будут совпадать с этими 

другими проблемами . Иначе фреймворки не были бы столь популярны . 

Поэтому фреймворки могут быть очень полезными — в той мере, в какой 

существует совпадение .

Неравный брак

Отношения между вами и автором фреймворка чрезвычайно асимметричны . 

Вы должны обладать огромной приверженностью фреймворку, но его автор 

не несет никаких обязательств перед вами .

Задумайтесь над этим . Когда вы используете фреймворк, вы читаете до-

кументацию, предоставленную его автором . В этой документации автор 

и другие пользователи фреймворка рассказывают вам, как интегрировать 

ваше программное обеспечение с фреймворком . Обычно это означает, что 

вы должны обернуть фреймворк своей архитектурой . Автор рекомендует 

использовать базовые классы и импортировать инструменты фреймворка 

в свои бизнес-объекты . Автор настоятельно рекомендует вам привязать 
</body></html>