<!DOCTYPE html><html lang="ru"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>book</title></head><body>гать их в особом порядке . Хорошая архитектура помогает системе достичь 

уровня немедленной готовности к развертыванию сразу после сборки .

И снова это достигается за счет разделения системы на компоненты и их 

изоляции, включая специальные компоненты, которые связывают систему 

воедино и гарантируют правильный запуск, интеграцию и контроль за ра-

ботой каждого компонента .

Сохранение разнообразия вариантов

Хорошая архитектура стремится достичь баланса всех этих потребностей 

компонентной организации с целью удовлетворить их . Звучит просто, 

правда? Согласен, мне легко писать .

В действительности добиться такого баланса очень трудно . Проблема в том, 

что зачастую мы не знаем всех возможных вариантов использования, экс-

плуатационных ограничений, структуры команды разработчиков или тре-

бований к развертыванию . Хуже того, даже если бы мы все это знали, нет 

никаких гарантий, что ничего из этого не изменится в течение жизненного 

цикла системы . Проще говоря, мы преследуем нечеткие и переменчивые 

цели . Добро пожаловать в реальный мир .

Но не все потеряно: некоторые принципы строительства архитектуры от-

носительно недороги в реализации и могут помочь сбалансировать эти 

нужды, даже когда нет четкой картины целей, к которым вы стремитесь . 

Эти принципы помогают нам делить системы на хорошо изолированные 

компоненты, что позволяет максимально долго оставлять как можно больше 

вариантов открытыми .

Хорошая архитектура упрощает возможность изменения системы во всех 

ее вариантах, оставляя возможности открытыми .

Разделение уровней

Поговорим о вариантах использования . Архитектор стремится получить 

структуру системы, поддерживающую необходимые варианты использо-

вания, но не знает их все . Зато он знает основное назначение системы . Это 

может быть онлайн-магазин, система учета материалов или система обработ-

ки заказов . Поэтому, опираясь на контекст назначения системы, архитектор 

Разделение вариантов использования      159

может использовать принципы единственной ответственности и согласо-

ванного изменения для отделения друг от друга всего, что изменяется по 

разным причинам, и объединения всего, что изменяется по одной причине .

Что изменяется по разным причинам? Кое-что из этого сразу бросается 

в глаза . Пользовательский интерфейс изменяется по причинам, не име-

ющим ничего общего с бизнес-правилами . Все варианты использования 

включают оба этих элемента . Очевидно, что поэтому хороший архитектор 

отделит часть, отвечающую за пользовательский интерфейс, от части, реа-

лизующей бизнес-правила, так, что их можно будет изменять независимо 

друг от друга, сохраняя при этом ясную видимость вариантов использо-

вания .

Сами бизнес-правила могут делиться на более или менее тесно связанные 

с приложением . Например, проверка полей ввода — это бизнес-правило, 

тесно связанное с приложением . Вычисление процентов по вкладу и подсчет 

запасов, напротив, — это бизнес-правила, более тесно связанные с пред-

метной областью . Эти два разных вида бизнес-правил будут изменяться 

с разной скоростью и по разным причинам, поэтому их следует разделить 

так, чтобы их можно было изменять независимо .

База данных, язык запросов и даже схема — все это технические детали, 

которые не имеют ничего общего с бизнес-правилами и пользовательским 

интерфейсом . Они будут изменяться со скоростью и по причинам, не за-

висящим от других аспектов системы . Следовательно, в архитектуре они 

должны отделяться от остальной системы, чтобы их можно было изменять 

независимо .

То есть систему можно разделить на горизонтальные уровни: пользователь-

ский интерфейс, бизнес-правила, характерные для приложения, бизнес-пра-

вила, не зависящие от приложения, и база данных — кроме всего прочего .

Разделение вариантов использования

Что еще меняется по разным причинам? Сами варианты использования! 

Добавление заказов в систему сопровождения заказов почти наверняка 

будет изменяться с иной скоростью и по иным причинам, чем удаление за-

казов из системы . Варианты использования дают очень естественный способ 

деления системы .

В то же время варианты использования образуют узкие вертикальные 

срезы, пересекающие горизонтальные слои системы . Каждый вариант 

использования включает какую-то долю пользовательского интерфейса, 

160   Глава 16. Независимость

часть бизнес-правил, характерных для приложения, какие-то бизнес-пра-

вила, не зависящие от приложения, и некоторые функции базы данных . То 

есть вместе с делением системы на горизонтальные слои мы одновременно 

делим ее на тонкие вертикальные варианты использования, пересекающие 

эти слои .

Чтобы получить желаемое разделение, мы должны отделить пользова-

тельский интерфейс добавления заказа от пользовательского интерфейса 

удаления заказа . То же самое нужно проделать с бизнес-правилами и базой 

данных . Вертикальные срезы случаев использования системы мы сохраняем 

отдельными .

Здесь можно увидеть определенный шаблон . Разделив элементы системы, 

изменяющиеся по разным причинам, вы сможете добавлять новые вариан-

ты использования, не влияя на имеющиеся . Если при этом вы сгруппируе-

те поддержку этих случаев использования в пользовательском интерфейсе 

и в базе данных так, что для всех них в пользовательском интерфейсе 

и базе данных будут предусмотрены свои аспекты, тогда добавление новых 

случаев использования почти гарантированно не повлияет на имеющиеся .

Режим разделения

Теперь задумаемся, какое значение имеет разделение для эффективной 

работы . Если разные варианты использования разделены, тогда те, что 

должны работать с максимальной пропускной способностью, уже наверняка 

отделены от работающих с низкой пропускной способностью . Если поль-

зовательский интерфейс и база данных отделены от бизнес-правил, значит, 

все они могут выполняться на разных серверах . Части, которые должны 

выполняться с максимальной пропускной способностью, можно запустить 

на нескольких серверах .

Проще говоря, разделение вариантов использования также помогает повы-

сить эффективность работы . Однако для этого разделение должно иметь со-

ответствующий режим . Чтобы разделенные компоненты могли выполняться 

на собственных серверах, они не должны зависеть от наличия общего адрес-

ного пространства в памяти . Они должны быть независимыми службами, 
</body></html>